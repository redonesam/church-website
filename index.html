<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Nyeri PEFA Cathedral of Grace</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Lora:ital,wght@0,400;0,500;1,400&display=swap" rel="stylesheet">

  <style>
    :root {
      --gold: #c9a84c;
      --deep-blue: #0a1628;
      --mid-blue: #1a2f5e;
      --light-gold: #f5e6c0;
      --cream: #fdfaf3;
      --text-dark: #1a1a2e;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Lora', Georgia, serif;
      background: var(--cream);
      color: var(--text-dark);
      overflow-x: hidden;
    }

    /* ============================================================
       HEAVENLY BACKGROUND CANVAS ‚Äî Fixed behind everything
    ============================================================ */
    #heavenCanvas {
      position: fixed;
      inset: 0;
      z-index: -3;
      pointer-events: none;
    }

    /* Subtle animated light rays overlay on the whole page */
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      z-index: -2;
      pointer-events: none;
      background: repeating-linear-gradient(
        110deg,
        transparent 0px,
        rgba(255, 228, 140, 0.07) 60px,
        transparent 120px
      );
      animation: rayShift 25s linear infinite;
    }

    @keyframes rayShift {
      from { background-position: 0 0; }
      to   { background-position: 1200px 0; }
    }

    /* ============================================================
       HEADER ‚Äî Full bleed background image, NO GAPS
    ============================================================ */
    header {
      position: relative;
      width: 100%;
      min-height: 100vh;           /* full viewport height */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      overflow: hidden;
      /* Background image fills the entire header */
      background-image: url("image_church.jpg");
      background-size: cover;      /* ‚úÖ completely fills the area */
      background-position: center center;
      background-repeat: no-repeat;
      background-attachment: fixed; /* parallax feel */
    }

    /* Dark gradient overlay for text readability */
    header::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(
        180deg,
        rgba(5, 15, 40, 0.55) 0%,
        rgba(5, 15, 40, 0.35) 50%,
        rgba(5, 15, 40, 0.65) 100%
      );
      z-index: 1;
    }

    /* Gold shimmer sweep across header */
    header::after {
      content: "";
      position: absolute;
      inset: 0;
      background: repeating-linear-gradient(
        100deg,
        transparent 0px,
        rgba(201, 168, 76, 0.08) 80px,
        transparent 160px
      );
      animation: headerGlow 20s linear infinite;
      z-index: 2;
      pointer-events: none;
    }

    @keyframes headerGlow {
      from { background-position: 0 0; }
      to   { background-position: 800px 0; }
    }

    .header-content {
      position: relative;
      z-index: 3;
      padding: 40px 25px;
      animation: fadeUp 1.6s ease forwards;
    }

    .header-content img {
      width: 130px;
      height: 130px;
      object-fit: cover;
      border-radius: 50%;
      border: 4px solid var(--gold);
      background: rgba(255,255,255,0.12);
      backdrop-filter: blur(6px);
      margin-bottom: 22px;
      animation: fadeDown 1.3s ease forwards;
      box-shadow: 0 0 30px rgba(201,168,76,0.5);
    }

    .header-content h1 {
      font-family: 'Cinzel', serif;
      font-size: clamp(26px, 5vw, 52px);
      color: #ffffff;
      letter-spacing: 2px;
      text-shadow: 0 2px 20px rgba(0,0,0,0.6);
      margin-bottom: 12px;
    }

    .header-content h1 span {
      color: var(--gold);
    }

    .header-content .tagline {
      font-family: 'Lora', serif;
      font-style: italic;
      font-size: clamp(14px, 2.2vw, 18px);
      color: rgba(255,255,255,0.88);
      letter-spacing: 1px;
    }

    /* Scroll-down chevron */
    .scroll-hint {
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 3;
      color: rgba(255,255,255,0.6);
      font-size: 28px;
      animation: bounce 2s ease-in-out infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateX(-50%) translateY(0); }
      50%       { transform: translateX(-50%) translateY(10px); }
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(35px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeDown {
      from { opacity: 0; transform: translateY(-25px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* ============================================================
       NAVIGATION
    ============================================================ */
    nav {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(8, 18, 50, 0.96);
      backdrop-filter: blur(10px);
      padding: 14px 25px;
      text-align: center;
      border-bottom: 1px solid rgba(201,168,76,0.3);
    }

    nav a {
      color: rgba(255,255,255,0.85);
      text-decoration: none;
      margin: 0 18px;
      font-family: 'Cinzel', serif;
      font-size: 13px;
      letter-spacing: 1.5px;
      transition: color 0.3s;
    }

    nav a:hover { color: var(--gold); }

    /* ============================================================
       SHARED SECTION STYLES
    ============================================================ */
    section {
      position: relative;
      max-width: 1050px;
      margin: 50px auto;
      background: rgba(255, 252, 245, 0.93);
      backdrop-filter: blur(8px);
      padding: 45px 40px;
      border-radius: 18px;
      border: 1px solid rgba(201,168,76,0.2);
      box-shadow: 0 8px 35px rgba(0,0,0,0.08);
      overflow: hidden;
    }

    /* Subtle gold gradient corner accent */
    section::before {
      content: "";
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 3px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
    }

    h2 {
      font-family: 'Cinzel', serif;
      color: var(--mid-blue);
      font-size: clamp(20px, 3vw, 28px);
      margin-bottom: 20px;
      text-align: center;
    }

    /* ============================================================
       WELCOME SECTION
    ============================================================ */
    .welcome p {
      font-size: 15px;
      line-height: 1.9;
      color: #444;
      margin-bottom: 12px;
    }

    .welcome-verse {
      margin-top: 25px;
      padding: 20px 25px;
      font-style: italic;
      background: linear-gradient(135deg, #f0f5ff, #fef9ee);
      border-left: 4px solid var(--gold);
      border-radius: 10px;
      color: #333;
      font-size: 15px;
      line-height: 1.8;
    }

    .welcome-verse span {
      display: block;
      margin-top: 8px;
      font-weight: bold;
      font-style: normal;
      color: var(--mid-blue);
      font-family: 'Cinzel', serif;
      font-size: 12px;
      letter-spacing: 1px;
    }

    /* ============================================================
       SERVICES GRID
    ============================================================ */
    .services-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 18px;
      margin-top: 10px;
    }

    .service-card {
      background: linear-gradient(145deg, #f7fbff, #fff9ee);
      padding: 22px 18px;
      border-radius: 14px;
      text-align: center;
      border: 1px solid rgba(201,168,76,0.25);
      box-shadow: 0 4px 14px rgba(0,0,0,0.06);
      transition: transform 0.3s, box-shadow 0.3s;
      opacity: 0;
      animation: fadeUp 0.7s ease forwards;
    }

    .service-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.12);
    }

    .service-card:nth-child(1) { animation-delay: 0.1s; }
    .service-card:nth-child(2) { animation-delay: 0.2s; }
    .service-card:nth-child(3) { animation-delay: 0.3s; }
    .service-card:nth-child(4) { animation-delay: 0.4s; }
    .service-card:nth-child(5) { animation-delay: 0.5s; }

    .service-card h3 {
      font-family: 'Cinzel', serif;
      color: var(--mid-blue);
      font-size: 15px;
      margin-bottom: 8px;
    }

    .service-card p {
      color: #666;
      font-size: 13.5px;
    }

    /* ============================================================
       ABOUT / LEADERSHIP
    ============================================================ */
    .about-text {
      font-size: 15px;
      line-height: 1.9;
      color: #555;
      margin-bottom: 14px;
      text-align: center;
    }

    .leadership { margin-top: 35px; }

    .leadership h3 {
      font-family: 'Cinzel', serif;
      color: var(--mid-blue);
      text-align: center;
      font-size: 18px;
      margin-bottom: 20px;
      letter-spacing: 1px;
    }

    .leaders {
      display: flex;
      justify-content: center;
      gap: 25px;
      flex-wrap: wrap;
    }

    .leader-card {
      background: linear-gradient(145deg, #f5f8fb, #fffbf0);
      padding: 25px 30px;
      border-radius: 14px;
      min-width: 230px;
      text-align: center;
      border: 1px solid rgba(201,168,76,0.3);
      box-shadow: 0 6px 18px rgba(0,0,0,0.07);
    }

    .leader-card h4 {
      font-family: 'Cinzel', serif;
      color: var(--mid-blue);
      margin-bottom: 8px;
      font-size: 15px;
    }

    .leader-card span {
      color: var(--gold);
      font-size: 13px;
      font-style: italic;
    }

    /* ============================================================
       LIVESTREAM SECTION  ‚Üê THE BIG FIX
    ============================================================ */
    #livestream {
      background: linear-gradient(180deg, rgba(8,18,50,0.97), rgba(18,32,70,0.97));
      border: 1px solid rgba(201,168,76,0.35);
    }

    #livestream h2 { color: #ffffff; }

    /* Status indicator */
    .live-status-bar {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
      font-family: 'Cinzel', serif;
      font-size: 14px;
      letter-spacing: 1px;
    }

    /* Red pulsing dot */
    .live-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #e53935;
      animation: pulseDot 1.4s ease-in-out infinite;
      flex-shrink: 0;
    }

    @keyframes pulseDot {
      0%, 100% { box-shadow: 0 0 0 0 rgba(229,57,53,0.7); }
      50%       { box-shadow: 0 0 0 10px rgba(229,57,53,0); }
    }

    .live-status-bar span { color: #ffffff; }
    .live-status-bar .status-text-live  { color: #ff5252; font-weight: bold; }
    .live-status-bar .status-text-off   { color: #aaa; }

    /* ‚îÄ‚îÄ VIDEO CONTAINER ‚îÄ‚îÄ */
    #liveWrapper {
      width: 100%;
      border-radius: 14px;
      overflow: hidden;
      box-shadow: 0 0 40px rgba(201,168,76,0.3);
      position: relative;
      background: #000;
    }

    #liveWrapper iframe {
      display: block;
      width: 100%;
      height: 420px;
      border: none;
    }

    /* LIVE badge overlay on video */
    .live-badge {
      position: absolute;
      top: 14px;
      left: 14px;
      background: #e53935;
      color: #fff;
      font-family: 'Cinzel', serif;
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 1.5px;
      padding: 5px 12px;
      border-radius: 4px;
      z-index: 10;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .live-badge::before {
      content: "";
      width: 7px;
      height: 7px;
      border-radius: 50%;
      background: #fff;
      animation: pulseDot 1.2s ease-in-out infinite;
      flex-shrink: 0;
    }

    /* ‚îÄ‚îÄ OFFLINE MESSAGE ‚îÄ‚îÄ */
    #offlineMsg {
      text-align: center;
      padding: 40px 20px;
    }

    #offlineMsg .offline-icon {
      font-size: 50px;
      margin-bottom: 18px;
      opacity: 0.4;
    }

    #offlineMsg p {
      color: rgba(255,255,255,0.6);
      font-size: 15px;
      line-height: 1.8;
      margin-bottom: 8px;
    }

    #offlineMsg .yt-link {
      display: inline-block;
      margin-top: 18px;
      padding: 12px 26px;
      background: #c62828;
      color: #fff;
      border-radius: 30px;
      font-family: 'Cinzel', serif;
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 1px;
      text-decoration: none;
      transition: background 0.3s, transform 0.2s;
    }

    #offlineMsg .yt-link:hover {
      background: #e53935;
      transform: scale(1.04);
    }

    /* ‚îÄ‚îÄ PEOPLE SILHOUETTE ANIMATION (shown while offline) ‚îÄ‚îÄ */
    .congregation-animation {
      display: flex;
      justify-content: center;
      align-items: flex-end;
      gap: 5px;
      height: 90px;
      margin: 25px 0;
      overflow: hidden;
    }

    .person {
      width: 14px;
      border-radius: 7px 7px 3px 3px;
      background: rgba(201,168,76,0.45);
      animation: peopleRise 2.5s ease-in-out infinite;
    }

    /* vary heights & delays to look like a crowd */
    .person:nth-child(1)  { height: 45px; animation-delay: 0.0s; }
    .person:nth-child(2)  { height: 60px; animation-delay: 0.15s; }
    .person:nth-child(3)  { height: 75px; animation-delay: 0.3s; }
    .person:nth-child(4)  { height: 55px; animation-delay: 0.45s; }
    .person:nth-child(5)  { height: 80px; animation-delay: 0.6s; }
    .person:nth-child(6)  { height: 50px; animation-delay: 0.75s; }
    .person:nth-child(7)  { height: 70px; animation-delay: 0.9s; }
    .person:nth-child(8)  { height: 40px; animation-delay: 1.05s; }
    .person:nth-child(9)  { height: 65px; animation-delay: 1.2s; }
    .person:nth-child(10) { height: 58px; animation-delay: 1.35s; }
    .person:nth-child(11) { height: 72px; animation-delay: 1.5s; }
    .person:nth-child(12) { height: 48px; animation-delay: 1.65s; }

    @keyframes peopleRise {
      0%, 100% { transform: translateY(0) scaleY(1); opacity: 0.45; }
      50%       { transform: translateY(-8px) scaleY(1.08); opacity: 0.75; }
    }

    /* ‚îÄ‚îÄ WHEN LIVE: crowd animation overlaid on video (corner) ‚îÄ‚îÄ */
    .live-crowd-overlay {
      position: absolute;
      bottom: 10px;
      right: 10px;
      display: flex;
      align-items: flex-end;
      gap: 3px;
      height: 40px;
      z-index: 5;
      pointer-events: none;
    }

    .live-crowd-overlay .person {
      width: 6px;
      background: rgba(255,255,255,0.55);
    }

    .live-crowd-overlay .person:nth-child(1)  { height: 18px; animation-delay: 0.0s; }
    .live-crowd-overlay .person:nth-child(2)  { height: 26px; animation-delay: 0.2s; }
    .live-crowd-overlay .person:nth-child(3)  { height: 32px; animation-delay: 0.4s; }
    .live-crowd-overlay .person:nth-child(4)  { height: 22px; animation-delay: 0.6s; }
    .live-crowd-overlay .person:nth-child(5)  { height: 28px; animation-delay: 0.8s; }
    .live-crowd-overlay .person:nth-child(6)  { height: 35px; animation-delay: 1.0s; }
    .live-crowd-overlay .person:nth-child(7)  { height: 20px; animation-delay: 1.2s; }
    .live-crowd-overlay .person:nth-child(8)  { height: 30px; animation-delay: 1.4s; }

    /* ============================================================
       MAP
    ============================================================ */
    .map-container {
      margin-top: 20px;
      border-radius: 14px;
      overflow: hidden;
      box-shadow: 0 6px 20px rgba(0,0,0,0.12);
    }

    /* ============================================================
       FOOTER
    ============================================================ */
    footer {
      background: var(--deep-blue);
      color: #fff;
      padding: 55px 25px 30px;
      text-align: center;
      border-top: 2px solid rgba(201,168,76,0.3);
    }

    footer h3 {
      font-family: 'Cinzel', serif;
      font-size: 22px;
      margin-bottom: 8px;
      color: var(--gold);
      letter-spacing: 1px;
    }

    footer .footer-sub {
      color: rgba(255,255,255,0.6);
      font-size: 14px;
      font-style: italic;
      margin-bottom: 30px;
    }

    .social-icons {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 25px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .social-icons a img {
      width: 38px;
      height: 38px;
      transition: transform 0.3s, filter 0.3s;
      filter: brightness(0.85);
    }

    .social-icons a img:hover {
      transform: scale(1.25);
      filter: brightness(1.4);
    }

    .yt-live-btn {
      display: inline-flex;
      align-items: center;
      gap: 9px;
      padding: 12px 24px;
      background: linear-gradient(135deg, #c62828, #ff5252);
      color: #fff;
      border-radius: 30px;
      font-family: 'Cinzel', serif;
      font-size: 12px;
      font-weight: 700;
      letter-spacing: 1.2px;
      text-decoration: none;
      animation: pulseLive 2.2s infinite;
    }

    @keyframes pulseLive {
      0%, 100% { box-shadow: 0 0 0 0 rgba(255, 82, 82, 0.6); }
      50%       { box-shadow: 0 0 0 14px rgba(255, 82, 82, 0); }
    }

    .copyright {
      margin-top: 25px;
      color: rgba(255,255,255,0.35);
      font-size: 12px;
      letter-spacing: 0.5px;
    }

    /* ============================================================
       SCROLL REVEAL
    ============================================================ */
    .reveal {
      opacity: 0;
      transform: translateY(45px);
      transition: opacity 0.9s ease, transform 0.9s ease;
    }

    .reveal.active {
      opacity: 1;
      transform: translateY(0);
    }

    /* ============================================================
       RESPONSIVE
    ============================================================ */
    @media (max-width: 768px) {
      section { padding: 30px 22px; margin: 30px 15px; }
      #liveWrapper iframe { height: 230px; }
      nav a { margin: 0 10px; font-size: 11px; }
    }
  </style>
</head>
<body>

<!-- ============================================================
     HEAVENLY CANVAS ‚Äî Draws animated clouds + birds in JS
============================================================ -->
<canvas id="heavenCanvas"></canvas>

<!-- ============================================================
     HEADER
============================================================ -->
<header>
  <div class="header-content">
    <img src="image_logo.png" alt="PEFA Church Logo">
    <h1>PEFA Cathedral of<span> Grace</span></h1>
    <p class="tagline">Nyeri Town &bull; Along Mumbi Road</p>
  </div>
  <div class="scroll-hint">
    <i class="fas fa-chevron-down"></i>
  </div>
</header>

<!-- ============================================================
     NAV
============================================================ -->
<nav>
  <a href="#home">Home</a>
  <a href="#about">About</a>
  <a href="#services">Services</a>
  <a href="#livestream">Live Stream</a>
  <a href="#location">Location</a>
</nav>

<!-- ============================================================
     WELCOME
============================================================ -->
<section id="home" class="welcome reveal">
  <h2>Welcome Home</h2>
  <p style="text-align:center; margin-bottom:18px; color:#666; font-style:italic;">
    A place of worship, fellowship, and spiritual growth
  </p>
  <p>
    Nyeri PEFA Cathedral of Grace is a Christ-centered church devoted to worship,
    prayer, and the teaching of God's Word.
  </p>
  <p>
    We exist to nurture believers, strengthen families, and impact our community
    through faith, love, and service.
  </p>
  <p>
    Whether you are visiting for the first time or seeking a church to call home,
    we warmly invite you to join us as we grow together in Christ.
  </p>
  <blockquote class="welcome-verse">
    "Come, let us worship and bow down; let us kneel before the Lord our Maker."
    <span>‚Äî Psalm 95:6</span>
  </blockquote>
</section>

<!-- ============================================================
     ABOUT
============================================================ -->
<section id="about" class="reveal">
  <h2>About Us</h2>
  <p class="about-text">
    Nyeri PEFA Cathedral of Grace is a Christ-centered church committed to
    preaching the Gospel of Jesus Christ, nurturing believers, and impacting
    the community through love, faith, and service.
  </p>
  <p class="about-text">
    Our mission is to raise a people rooted in faith, growing in grace, and
    living out the teachings of Christ in their daily lives.
  </p>
  <div class="leadership">
    <h3>Church Leadership</h3>
    <div class="leaders">
      <div class="leader-card">
        <h4>Bishop Dr. James Ndirangu</h4>
        <span>Presiding Bishop</span>
      </div>
      <div class="leader-card">
        <h4>Pastor Daniel Muchemi</h4>
        <span>Resident Pastor</span>
      </div>
    </div>
  </div>
</section>

<!-- ============================================================
     SERVICES
============================================================ -->
<section id="services" class="reveal">
  <h2>Service Schedule</h2>
  <div class="services-grid">
    <div class="service-card">
      <h3>Sunday Service</h3>
      <p>9:00 AM ‚Äì 12:30 PM</p>
    </div>
    <div class="service-card">
      <h3>Men Fellowship</h3>
      <p>Tuesday &bull; 6:00 ‚Äì 7:45 PM</p>
    </div>
    <div class="service-card">
      <h3>Youth Fellowship</h3>
      <p>Wednesday &bull; 6:00 ‚Äì 7:45 PM</p>
    </div>
    <div class="service-card">
      <h3>Women Fellowship</h3>
      <p>Thursday &bull; 2:00 ‚Äì 4:00 PM</p>
    </div>
    <div class="service-card">
      <h3>Refreshing Service</h3>
      <p>Friday &bull; 7:00 ‚Äì 9:00 PM</p>
    </div>
  </div>
</section>

<!-- ============================================================
     LIVESTREAM  ‚Üê FIXED & ENHANCED
============================================================ -->
<section id="livestream" class="reveal">
  <h2>Live Stream</h2>

  <!-- Status bar (updates dynamically) -->
  <div class="live-status-bar">
    <div class="live-dot" id="liveDot"></div>
    <span id="liveStatusText" class="status-text-off">Checking live status‚Ä¶</span>
  </div>

  <!-- VIDEO (shown when live) -->
  <div id="liveWrapper" style="display:none; position:relative;">
    <div class="live-badge">LIVE</div>
    <iframe
      id="liveFrame"
      src="https://www.youtube.com/embed/live_stream?channel=UCSIng4RMDebf-7OQKl_6GQA&autoplay=1&mute=0"
      allow="autoplay; encrypted-media; fullscreen"
      allowfullscreen>
    </iframe>
    <!-- Moving congregation silhouettes while video plays -->
    <div class="live-crowd-overlay">
      <div class="person"></div><div class="person"></div>
      <div class="person"></div><div class="person"></div>
      <div class="person"></div><div class="person"></div>
      <div class="person"></div><div class="person"></div>
    </div>
  </div>

  <!-- OFFLINE MESSAGE (shown when not live) -->
  <div id="offlineMsg">
    <!-- Animated congregation waiting for service -->
    <div class="congregation-animation" aria-hidden="true">
      <div class="person"></div><div class="person"></div>
      <div class="person"></div><div class="person"></div>
      <div class="person"></div><div class="person"></div>
      <div class="person"></div><div class="person"></div>
      <div class="person"></div><div class="person"></div>
      <div class="person"></div><div class="person"></div>
    </div>
    <div class="offline-icon">üôè</div>
    <p>The church is not currently streaming.</p>
    <p>When we go <strong style="color:#ff7070;">LIVE</strong> on YouTube, the service will appear here automatically.</p>
    <a href="https://www.youtube.com/@PEFANyeriCathedralofGrace-254" target="_blank" class="yt-link">
      <i class="fab fa-youtube"></i> &nbsp;Subscribe on YouTube
    </a>
  </div>
</section>

<!-- ============================================================
     LOCATION
============================================================ -->
<section id="location" class="reveal">
  <h2>Our Location</h2>
  <p style="text-align:center; color:#666; margin-bottom:5px;">
    Nyeri Town &bull; Along Mumbi Road
  </p>
  <div class="map-container">
    <iframe
      src="https://www.google.com/maps?q=Nyeri%20PEFA%20Cathedral%20of%20Grace&output=embed"
      width="100%" height="360" style="border:0;" loading="lazy">
    </iframe>
  </div>
</section>

<!-- ============================================================
     FOOTER
============================================================ -->
<footer>
  <h3>PEFA Cathedral of Grace</h3>
  <p class="footer-sub">Raising a people rooted in faith and growing in grace.</p>
  <div class="social-icons">
    <a href="https://www.facebook.com/pefanyericathedralofgrace" target="_blank" title="Facebook">
      <img src="https://cdn-icons-png.flaticon.com/512/733/733547.png" alt="Facebook">
    </a>
    <a href="https://www.youtube.com/@PEFANyeriCathedralofGrace-254"
       target="_blank" class="yt-live-btn">
      <i class="fab fa-youtube"></i> Watch Live on YouTube
    </a>
    <a href="https://www.tiktok.com/@pefa_nyeri_cath_of_grace" target="_blank" title="TikTok">
      <img src="https://cdn-icons-png.flaticon.com/512/3046/3046121.png" alt="TikTok">
    </a>
  </div>
  <p class="copyright">¬© 2026 Nyeri PEFA Cathedral of Grace. All Rights Reserved.</p>
</footer>

<!-- ============================================================
     SCRIPTS
============================================================ -->

<!-- 1. SCROLL REVEAL -->
<script>
(function () {
  const reveals = document.querySelectorAll('.reveal');
  function revealOnScroll() {
    const winH = window.innerHeight;
    reveals.forEach(el => {
      if (el.getBoundingClientRect().top < winH - 90) {
        el.classList.add('active');
      }
    });
  }
  window.addEventListener('scroll', revealOnScroll);
  revealOnScroll();
})();
</script>

<!-- 2. HEAVENLY BACKGROUND CANVAS: animated clouds + birds -->
<script>
(function () {
  const canvas = document.getElementById('heavenCanvas');
  const ctx = canvas.getContext('2d');

  function resize() {
    canvas.width  = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  resize();
  window.addEventListener('resize', resize);

  /* ---------- CLOUDS ---------- */
  const clouds = [];
  for (let i = 0; i < 9; i++) {
    clouds.push({
      x:     Math.random() * canvas.width * 1.5 - canvas.width * 0.25,
      y:     Math.random() * canvas.height * 0.7,
      r:     55 + Math.random() * 80,
      speed: 0.18 + Math.random() * 0.22,
      alpha: 0.12 + Math.random() * 0.18,
    });
  }

  function drawCloud(c) {
    ctx.save();
    ctx.globalAlpha = c.alpha;
    ctx.fillStyle = '#ffffff';
    ctx.beginPath();
    // puff made of overlapping circles
    const bumps = [
      [0, 0, c.r],
      [c.r * 0.7, c.r * 0.1, c.r * 0.72],
      [-c.r * 0.65, c.r * 0.12, c.r * 0.65],
      [c.r * 1.3,  c.r * 0.25, c.r * 0.55],
      [-c.r * 1.2, c.r * 0.28, c.r * 0.5],
    ];
    bumps.forEach(([dx, dy, r]) => {
      ctx.moveTo(c.x + dx + r, c.y + dy);
      ctx.arc(c.x + dx, c.y + dy, r, 0, Math.PI * 2);
    });
    ctx.fill();
    ctx.restore();
  }

  /* ---------- BIRDS ---------- */
  /* Each "bird" is a simple SVG-like wing-flap drawn with bezier curves */
  const birds = [];
  for (let i = 0; i < 14; i++) {
    birds.push({
      x:     Math.random() * canvas.width * 1.5,
      y:     40 + Math.random() * canvas.height * 0.45,
      speed: 0.6 + Math.random() * 0.9,
      scale: 0.5 + Math.random() * 0.8,
      flapPhase: Math.random() * Math.PI * 2,
      flapSpeed: 0.05 + Math.random() * 0.04,
      alpha: 0.25 + Math.random() * 0.35,
    });
  }

  function drawBird(b, now) {
    const flap = Math.sin(b.flapPhase + now * b.flapSpeed) * 6 * b.scale;
    ctx.save();
    ctx.globalAlpha = b.alpha;
    ctx.strokeStyle = '#4a5568';
    ctx.lineWidth = 1.2 * b.scale;
    ctx.lineCap = 'round';
    ctx.beginPath();
    // left wing
    ctx.moveTo(b.x, b.y);
    ctx.quadraticCurveTo(b.x - 8 * b.scale, b.y - flap, b.x - 16 * b.scale, b.y - 4 * b.scale);
    // right wing
    ctx.moveTo(b.x, b.y);
    ctx.quadraticCurveTo(b.x + 8 * b.scale, b.y - flap, b.x + 16 * b.scale, b.y - 4 * b.scale);
    ctx.stroke();
    ctx.restore();
  }

  /* ---------- LIGHT RAYS ---------- */
  function drawRays(now) {
    const W = canvas.width, H = canvas.height;
    const cx = W * 0.5 + Math.sin(now * 0.0003) * W * 0.12;
    const numRays = 7;
    ctx.save();
    for (let i = 0; i < numRays; i++) {
      const angle = (i / numRays) * Math.PI * 2 + now * 0.00012;
      const alpha = 0.025 + 0.015 * Math.sin(now * 0.0007 + i);
      const grad = ctx.createLinearGradient(
        cx, -100,
        cx + Math.cos(angle) * H * 2,
        -100 + Math.sin(angle) * H * 2
      );
      grad.addColorStop(0, `rgba(255,228,120,${alpha})`);
      grad.addColorStop(1, 'rgba(255,255,255,0)');
      ctx.fillStyle = grad;
      ctx.beginPath();
      ctx.moveTo(cx, -100);
      const spread = 0.07;
      ctx.lineTo(
        cx + Math.cos(angle - spread) * H * 2.5,
        -100 + Math.sin(angle - spread) * H * 2.5
      );
      ctx.lineTo(
        cx + Math.cos(angle + spread) * H * 2.5,
        -100 + Math.sin(angle + spread) * H * 2.5
      );
      ctx.closePath();
      ctx.fill();
    }
    ctx.restore();
  }

  /* ---------- ANIMATION LOOP ---------- */
  function animate(now) {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Draw light rays from above
    drawRays(now);

    // Move & draw clouds
    clouds.forEach(c => {
      c.x += c.speed;
      if (c.x - c.r * 2 > canvas.width) {
        c.x = -c.r * 2;
        c.y = Math.random() * canvas.height * 0.65;
      }
      drawCloud(c);
    });

    // Move & draw birds
    birds.forEach(b => {
      b.x += b.speed;
      b.y -= b.speed * 0.12; // slight upward drift
      if (b.x > canvas.width + 30) {
        b.x = -30;
        b.y = 40 + Math.random() * canvas.height * 0.45;
      }
      drawBird(b, now);
    });

    requestAnimationFrame(animate);
  }

  requestAnimationFrame(animate);
})();
</script>

<!-- 3. LIVESTREAM CHECKER -->
<script>
(function () {
  const CHANNEL_ID = 'UCSIng4RMDebf-7OQKl_6GQA';
  const YT_LIVE_URL = `https://www.youtube.com/embed/live_stream?channel=${CHANNEL_ID}&autoplay=1&mute=0`;

  const liveWrapper  = document.getElementById('liveWrapper');
  const offlineMsg   = document.getElementById('offlineMsg');
  const liveFrame    = document.getElementById('liveFrame');
  const liveDot      = document.getElementById('liveDot');
  const statusText   = document.getElementById('liveStatusText');

  let currentlyLive  = null; // track state to avoid flicker

  /* ‚îÄ‚îÄ STRATEGY: Load the embed; if it redirects to a live stream,
     the iframe src will contain "watch" or stay on live_stream.
     We also poll the YouTube oEmbed endpoint as a secondary check.
     Because YouTube iframes are cross-origin, we rely on a proxy-free
     oEmbed URL which works from the browser without an API key.       */

  function setLive(isLive) {
    if (currentlyLive === isLive) return; // no change, skip DOM update
    currentlyLive = isLive;

    if (isLive) {
      // üî¥ LIVE
      liveWrapper.style.display  = 'block';
      offlineMsg.style.display   = 'none';
      liveFrame.src              = YT_LIVE_URL;
      liveDot.style.background   = '#e53935';
      statusText.textContent     = 'We are LIVE right now!';
      statusText.className       = 'status-text-live';
    } else {
      // ‚ö´ OFFLINE
      liveWrapper.style.display  = 'none';
      offlineMsg.style.display   = 'block';
      liveFrame.src              = ''; // stop loading to save bandwidth
      liveDot.style.background   = '#555';
      statusText.textContent     = 'Not live yet ‚Äî service will appear here when we go live.';
      statusText.className       = 'status-text-off';
    }
  }

  /* Primary check: YouTube oEmbed.
     A live stream at the /live alias returns valid oEmbed JSON.
     If the channel is NOT live, this URL 404s / returns an error.   */
  function checkLiveStatus() {
    const oEmbedUrl =
      `https://www.youtube.com/oembed?url=https://www.youtube.com/channel/${CHANNEL_ID}/live&format=json`;

    fetch(oEmbedUrl)
      .then(res => {
        if (res.ok) {
          return res.json().then(data => {
            // oEmbed succeeded ‚Äî channel/live redirected to an active video
            setLive(true);
          });
        } else {
          // 404 / 403 ‚Üí not live
          setLive(false);
        }
      })
      .catch(() => {
        /* If fetch is blocked by CORS (some browsers) fall back to
           the iframe-load approach: just show the frame and let it
           fail gracefully. We set state to null so it retries.       */
        if (currentlyLive === null) {
          // Show the frame speculatively; user will see YouTube's
          // own "not live" message if channel is offline.
          liveWrapper.style.display = 'block';
          offlineMsg.style.display  = 'none';
          liveFrame.src             = YT_LIVE_URL;
          statusText.textContent    = 'Tap below to check if we are live ‚Üì';
          statusText.className      = 'status-text-off';
        }
      });
  }

  // Run immediately then every 45 seconds
  checkLiveStatus();
  setInterval(checkLiveStatus, 45000);
})();
</script>

</body>
</html>
